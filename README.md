json-schema
===========

Simple utility tool to create json-schema from pojo java classes annotated with jaxb and json annotations. This framework
suports quite a few annotations from both jackson and jaxb. 

Simple Example
==============
Let us start with a simple pojo. 


```java
@XmlType
public class HelloWorld{

  private String name;
  
  private long timestamp;
  
  private String message;
  
  public String getName(){ return name; }
  
  public void setName(String n){ this.name = n; }
  
  public long getTimestamp(){ return timestamp; }
  
  public void setTimestamp(long t){ this.timestamp = t; }
  
  public String getMessage(){ return this.message; }
  
  public void setMessage(String message){ this.message = message; }

}
```
Using ```JsonSchemaGenerator```, it's quite easy to generate schema for your class. For example:
```scala
  val mapper = new ObjectMapper
  mapper.setSerializationInclusion(Inclusion.NON_NULL)
  val m = mapper.writerWithDefaultPrettyPrinter
  val gen = new JsonSchemaGenerator("http://yourwebsite.com/servicex#", "http://yourwebsite.com/servicex#")  
  println(m.writeValueAsString(gen.generateSchemaAsNode(classOf[HelloWorld])))
```

And this is the json output:
```
{
  "$schema" : "http://yourwebsite.com/servicex#",
  "id" : "http://yourwebsite.com/servicex#",
  "definitions" : {
    "HelloWorld" : {
      "title" : "HelloWorld",
      "type" : "object",
      "properties" : {
        "timestamp" : {
          "type" : "number"
        },
        "message" : {
          "type" : "string"
        },
        "name" : {
          "type" : "string"
        }
      }
    }
  }
}
```

Example: Objects with inheritence:
=================================

```scala

trait Common{
  @BeanProperty
  var name: String = _

  @BeanProperty
  var age: Int = _

  @BeanProperty
  var alive: Boolean = _
}

@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS)
@JsonSubTypes(value = Array(
  new JsonSubTypes.Type(value = classOf[SubC1]),
  new JsonSubTypes.Type(value = classOf[SubC2])
))
abstract class Base{
}

class SubC1 extends Base with Common

class SubC2 extends Base with Common{
  @XmlElement(required = true)
  @BeanProperty
  var anotherProperty: UUID = _
}
```

And here is the output generated by the json generator:
```
{
  "$schema" : "http://yourwebsite.com/servicex#",
  "id" : "http://yourwebsite.com/servicex#",
  "definitions" : {
    "Base" : {
      "title" : "Base",
      "type" : "object",
      "oneOf" : [ {
        "$ref" : "#/definitions/SubC1"
      }, {
        "$ref" : "#/definitions/SubC2"
      } ]
    },
    "SubC2" : {
      "title" : "SubC2",
      "type" : "object",
      "properties" : {
        "@class" : {
          "type" : "string",
          "enum" : [ "com.anadathur.swadl.jsongen.SubC2" ]
        },
        "age" : {
          "type" : "number"
        },
        "name" : {
          "type" : "string"
        },
        "anotherProperty" : {
          "type" : "string",
          "format" : "uuid"
        },
        "alive" : {
          "type" : "boolean"
        }
      },
      "required" : [ "anotherProperty", "@class" ]
    },
    "SubC1" : {
      "title" : "SubC1",
      "type" : "object",
      "properties" : {
        "@class" : {
          "type" : "string",
          "enum" : [ "com.anadathur.swadl.jsongen.SubC1" ]
        },
        "age" : {
          "type" : "number"
        },
        "name" : {
          "type" : "string"
        },
        "alive" : {
          "type" : "boolean"
        }
      },
      "required" : [ "@class" ]
    }
  }
}
```
More examples can be found in src/main/scala/com/anadathur/swadl/jsongen/Main.scala
